import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

 export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate road trip Planner for Location : from vavuniya to kandy, for 3 Days for Couple with a Cheap budget through car ,Give me a Hotel options list with, HotelName, Hotel address, Price, Hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place image Url, Geo Coordinates, ticket Pricing, Time to travel each of the location for 3 days with each days with each day plan with best time to visit in JSON format",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "trip_details": {\n    "start_location": "Vavuniya",\n    "end_location": "Kandy",\n    "duration": 3,\n    "travel_mode": "car",\n    "budget": "cheap",\n    "travelers": "couple"\n  },\n  "hotels": [\n    {\n      "name": "Hotel Hilltop Kandy",\n      "address": "276, Peradeniya Rd, Kandy 20000",\n      "price": "$25 - $40",\n      "image_url": "https://images.unsplash.com/photo-1551288049-5c7bb11155a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80",\n      "geo_coordinates": "7.2906, 80.6338",\n      "rating": 4.5,\n      "description": "A budget-friendly hotel with basic amenities, offering stunning views of Kandy."\n    },\n    {\n      "name": "The Kandy House",\n      "address": "104, Peradeniya Rd, Kandy 20000",\n      "price": "$40 - $60",\n      "image_url": "https://images.unsplash.com/photo-1551288049-5c7bb11155a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80",\n      "geo_coordinates": "7.2906, 80.6338",\n      "rating": 4,\n      "description": "A charming guesthouse with a colonial feel, offering comfortable rooms and a peaceful atmosphere."\n    },\n    {\n      "name": "Hotel Suisse",\n      "address": "165, Peradeniya Rd, Kandy 20000",\n      "price": "$30 - $50",\n      "image_url": "https://images.unsplash.com/photo-1551288049-5c7bb11155a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80",\n      "geo_coordinates": "7.2906, 80.6338",\n      "rating": 3.5,\n      "description": "A no-frills hotel with clean rooms and a convenient location in the heart of Kandy."\n    }\n  ],\n  "itinerary": [\n    {\n      "day": 1,\n      "theme": "Nature and Culture",\n      "plan": [\n        {\n          "place_name": "Ritigala Forest Reserve",\n          "place_details": "A beautiful forest reserve with ancient ruins and stunning views. Enjoy hiking trails, explore the ruins, and soak in the natural beauty.",\n          "image_url": "https://images.unsplash.com/photo-1551288049-5c7bb11155a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80",\n          "geo_coordinates": "7.5254, 80.7569",\n          "ticket_pricing": "Free",\n          "time_to_travel": "2-3 hours"\n        },\n        {\n          "place_name": "Sigiriya Rock Fortress",\n          "place_details": "A UNESCO World Heritage Site, Sigiriya is an ancient rock fortress with breathtaking views. Climb the rock, explore the ruins, and marvel at the frescoes.",\n          "image_url": "https://images.unsplash.com/photo-1551288049-5c7bb11155a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80",\n          "geo_coordinates": "7.9074, 80.6672",\n          "ticket_pricing": "Around $30",\n          "time_to_travel": "4-5 hours"\n        }\n      ],\n      "best_time_to_visit": "Morning"\n    },\n    {\n      "day": 2,\n      "theme": "Cultural Immersion",\n      "plan": [\n        {\n          "place_name": "Dambulla Cave Temple",\n          "place_details": "A UNESCO World Heritage Site, the Dambulla Cave Temple is a complex of five caves with stunning murals and Buddha statues. Explore the caves, admire the artwork, and experience the spiritual atmosphere.",\n          "image_url": "https://images.unsplash.com/photo-1551288049-5c7bb11155a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80",\n          "geo_coordinates": "7.8804, 80.6858",\n          "ticket_pricing": "Around $15",\n          "time_to_travel": "3-4 hours"\n        },\n        {\n          "place_name": "Kandy City",\n          "place_details": "Explore the vibrant city of Kandy, home to the Temple of the Tooth Relic, the Royal Botanical Gardens, and bustling markets. Visit the Temple of the Tooth, wander through the gardens, and immerse yourself in the local culture.",\n          "image_url": "https://images.unsplash.com/photo-1551288049-5c7bb11155a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80",\n          "geo_coordinates": "7.2906, 80.6338",\n          "ticket_pricing": "Temple of the Tooth - Around $10",\n          "time_to_travel": "Full day"\n        }\n      ],\n      "best_time_to_visit": "Morning and evening"\n    },\n    {\n      "day": 3,\n      "theme": "Relax and Explore",\n      "plan": [\n        {\n          "place_name": "Peradeniya Royal Botanical Gardens",\n          "place_details": "A sprawling botanical garden with a diverse collection of plants and trees from around the world. Take a leisurely stroll, admire the beauty of nature, and enjoy the peaceful atmosphere.",\n          "image_url": "https://images.unsplash.com/photo-1551288049-5c7bb11155a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80",\n          "geo_coordinates": "7.2838, 80.6277",\n          "ticket_pricing": "Around $5",\n          "time_to_travel": "3-4 hours"\n        },\n        {\n          "place_name": "Kandy Lake",\n          "place_details": "A picturesque lake in the heart of Kandy, offering a serene escape. Take a boat ride, enjoy the views, and experience the tranquility of the surroundings.",\n          "image_url": "https://images.unsplash.com/photo-1551288049-5c7bb11155a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80",\n          "geo_coordinates": "7.2906, 80.6338",\n          "ticket_pricing": "Free",\n          "time_to_travel": "2-3 hours"\n        }\n      ],\n      "best_time_to_visit": "Afternoon"\n    }\n  ]\n}\n```\n\n**Explanation:**\n\n* **trip_details:** This section outlines the core trip information including the start and end locations, trip duration, preferred travel mode, budget and number of travelers.\n* **hotels:** This section contains a list of budget-friendly hotel options in Kandy with details like name, address, price range, image URL, geo-coordinates, rating and a brief description.\n* **itinerary:** This section breaks down the 3-day itinerary with a theme for each day. Each day has a list of places to visit, providing details about the location, images, geo-coordinates, ticket prices and estimated travel time. It also suggests the best time of day to visit each location.\n\n**Notes:**\n\n* The provided hotel images are just placeholder URLs and you can replace them with actual image URLs from the respective hotels.\n* The price range for the hotels is estimated and can vary based on the season and booking time.\n* The ticket prices for attractions are approximate and are subject to change.\n* This itinerary is just a suggestion and you can customize it based on your interests and preferences.\n* The provided travel times are estimates and can vary based on traffic conditions. \n',
        },
      ],
    },
  ],
});
